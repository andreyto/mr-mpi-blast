Tutorial - How to run mr-mpi-blast



Updated: 12/8/2011
By Seung-Jin Sul (ssul@jcvi.org)



* NOTE
    - This tutorial is prepared and tested on XSEDE TACC Ranger cluster which 
      is one of high performance computing systems operated by Texas Advanced 
      Computing Center (TACC). It should be easy to adapt for other systems.
    - The following assumes that you are working in your own copy of the 
      tutorial directory.
      
      ex) $ mkdir $HOME/mr-mpi-blast-tutorial
          $ cp -R $MRMPIBLAST_PREFIX/tutorial/* $HOME/mr-mpi-blast-tutorial
          $ cd $HOME/mr-mpi-blast-tutorial
      
    - The '$MRMPIBLAST_PREFIX/bin' should be added to the executable search path.
      for running 'mrblast' and 'makeblastdb' executables and other Python scripts.
      
      ex) $ export PATH=$MRMPIBLAST_PREFIX/bin:$PATH
      

1. Set XSEDE TACC Ranger module list

   $ bash ./ranger_setup_env.sh


2. Prepare test data and run mr-mpi-blast

    (1) Generate queries
   
       $ sh ./1.generate_query.sh
   
        - Download NCBI RefSeq viral FASTA sequence files
        - Generate queries (1000bp length) by splitting the viral sequences 
        - Generate index file and defline file from the input query file 
          for running mr-mpi-blast
    

    (2) Make NCBI database
      
       $ sh ./2.make_blastdb.sh
   
        - Download NCBI RefSeq microbial FASTA sequence files
        - Make BLAST database using "makeblastdb" utility

        
    (3) Run mr-mpi-blast
       
       * NOTE: Please set your SGE account to $SGE_ACCOUNT 
       
       $ sh ./3.run_mr-mpi-blast.sh
       
        - Qsub mr-mpi-blast for BLAST search of the queries against the 
          generated BLAST db

        
    (4) Convert output hit files from mr-mpi-blast
   
       $ sh ./4.convert_hits.sh
        
         - Move './blastdb/*.bin' to './blastdb/hits'
         - Convert *.bin files in './blastdb/hits' into ./hits.csv with and 
           without the original deflines of the input queries.
         
                   
                   
                   
                   
