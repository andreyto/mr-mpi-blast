Tutorial - how to run mr-mpi-blast



Updated: 12/7/2011
By Seung-Jin Sul (ssul@jcvi.org)


* NOTE
    - This tutorial is prepared and tested on XSEDE Ranger cluster.
    - The following assumes that you are working in '$MRMPIBLAST_PREFIX/tutorial'
      directory or in your own copy of the tutorial directory.
      
      ex) 
            $ mkdir $HOME/mr-mpi-blast-tutorial
            $ cp -R $MRMPIBLAST_PREFIX/tutorial/* $HOME/mr-mpi-blast-tutorial
            $ cd $HOME/mr-mpi-blast-tutorial
      
    - The '$MRMPIBLAST_PREFIX/bin' should be added to the executable search path.
    

1. Set Ranger module list

   $ bash ./ranger_setup_env.sh


2. Prepare test data and run mr-mpi-blast

    (1) Generate queries
   
       $ sh ./1.generate_query.sh
   
        - Download NCBI RefSeq viral FASTA sequence files
        - Generate queries (1000bp length) by slitting the viral FASTA file 
        - Generate index files with the query file for running mr-mpi-blast
    

    (2) Make NCBI database
      
       $ sh ./2.make_blastdb.sh
   
        - Download NCBI RefSeq microbial FASTA sequence files
        - Make BLAST database using "makeblastdb" utility

        
    (3) Run mr-mpi-blast
       
       * NOTE: Please set your SGE account to $SGE_ACCOUNT 
       
       $ sh ./3.run_mr-mpi-blast.sh
       
        - Qsub mr-mpi-blast for BLAST search of the queries against the 
          generated BLAST db

        
    (4) Convert output hit files from mr-mpi-blast
   
       $ sh ./4.convert_hits.sh
        
         - Move './blastdb/*.bin' to './blastdb/hits'
         - Convert *.bin files in './blastdb/hits' into ./hits.csv
         
       * NOTE: In this tutorial example, the first column in hits.csv means 
               the unique query id in viral_all_query.fa.def in which the 
               original deflines can be retrieved.
                   
                   
                   
                   
